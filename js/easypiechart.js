/*easyPieChart Lightweight plugin to render simple, animated and retina optimized pie charts @license Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses. @author Robert Fleischmann <rendro87@gmail.com> (http://robert-fleischmann.de) @version 2.1.1*/!function(e,t){"object"==typeof exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("EasyPieChart",["jquery"],t):t(e.jQuery)}(this,function(e){var t=function(e,t){var a,i=document.createElement("canvas");"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(i);var n=i.getContext("2d");i.width=i.height=t.size,e.appendChild(i);var r=1;window.devicePixelRatio>1&&(r=window.devicePixelRatio,i.style.width=i.style.height=[t.size,"px"].join(""),i.width=i.height=t.size*r,n.scale(r,r)),n.translate(t.size/2,t.size/2),n.rotate((t.rotate/180-.5)*Math.PI);var o=(t.size-t.lineWidth)/2;t.scaleColor&&t.scaleLength&&(o-=t.scaleLength+2),Date.now=Date.now||function(){return+new Date};var s=function(e,t,a){a=Math.min(Math.max(0,a||1),1),n.beginPath(),n.arc(0,0,o,0,2*Math.PI*a,!1),n.strokeStyle=e,n.lineWidth=t,n.stroke()},h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},c=function(){t.scaleColor&&function(){var e,a,i=24;n.lineWidth=1,n.fillStyle=t.scaleColor,n.save();for(i=24;i>0;--i)i%6==0?(a=t.scaleLength,e=0):(a=.6*t.scaleLength,e=t.scaleLength-a),n.fillRect(-t.size/2+e,0,a,1),n.rotate(Math.PI/12);n.restore()}(),t.trackColor&&s(t.trackColor,t.lineWidth)};this.clear=function(){n.clearRect(t.size/-2,t.size/-2,t.size,t.size)},this.draw=function(e){var i;t.scaleColor||t.trackColor?n.getImageData&&n.putImageData?a?n.putImageData(a,0,0):(c(),a=n.getImageData(0,0,t.size*r,t.size*r)):(this.clear(),c()):this.clear(),n.lineCap=t.lineCap,i="function"==typeof t.barColor?t.barColor(e):t.barColor,e>0&&s(i,t.lineWidth,e/100)}.bind(this),this.animate=function(e,a){var i=Date.now();t.onStart(e,a);var n=function(){var r=Math.min(Date.now()-i,t.animate),o=t.easing(this,r,e,a-e,t.animate);this.draw(o),t.onStep(e,a,o),r>=t.animate?t.onStop(e,a):h(n)}.bind(this);h(n)}.bind(this)},a=function(e,a){var i={barColor:"#121d1f",trackColor:"#fff",scaleColor:"#fff",scaleLength:0,lineCap:"square",lineWidth:7,size:152,rotate:0,animate:1e3,easing:function(e,t,a,i,n){return(t/=n/2)<1?i/2*t*t+a:-i/2*(--t*(t-2)-1)+a},onStart:function(e,t){},onStep:function(e,t,a){},onStop:function(e,t){}};i.renderer=t;var n={},r=0,o=function(){for(var t in this.el=e,this.options=n,i)i.hasOwnProperty(t)&&(n[t]=a&&void 0!==a[t]?a[t]:i[t],"function"==typeof n[t]&&(n[t]=n[t].bind(this)));"string"==typeof n.easing&&"undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.easing[n.easing])?n.easing=jQuery.easing[n.easing]:n.easing=i.easing,this.renderer=new n.renderer(e,n),this.renderer.draw(r),e.dataset&&e.dataset.percent?this.update(parseFloat(e.dataset.percent)):e.getAttribute&&e.getAttribute("data-percent")&&this.update(parseFloat(e.getAttribute("data-percent")))}.bind(this);this.update=function(e){return e=parseFloat(e),n.animate?this.renderer.animate(r,e):this.renderer.draw(e),r=e,this}.bind(this),o()};e.fn.easyPieChart=function(t){return this.each(function(){e.data(this,"easyPieChart")||e.data(this,"easyPieChart",new a(this,t))})}});